Q. What do we need to make our React app production ready, compared to the static page which we prepared in first class?

A. There are several things which we need to do, like:
    1. Minifying the files
    2. Removing the console log's
    3. Optimizing the performance of app by using bundlers to compress all the React code into a single file

Here, we are creating our own create-react-app, and understanding what happens behing the scene when we use create-react-app as an abstraction.

Different bundlers: Webpack, Vite, Parcel

create-react-app internally uses webpack as the bundler. 

In this tutorial, we'll be using parcel as the bundler.

Now, parcel is a package, and so we need to install it using npm.

Alternative to npm is yarn, but we are going ahead with using npm.

There's no official name for npm, NPM doesn't stand for Node Package Manager.

In order to use NPM, we need to use npm init, and enter the various details as required.

Q. What is NPM, and why do we need it inside our React App?

A.  NPM helps us to manage the dependencies in out React App. Maven:Java :: NPM:React
    We need NPM in our React app so that we can use various packages (superpowers :D) which we need in our React app, such as bundlers, minifiers etc.

Q. How do we ignite our app?

A.  By installing parcel bundler, it is a zero coniguration tool. It has similar features which Vite or Webpack has to offer.

We'll install parcel as a dev-dependency in our project, using the command `npm install -D parcel ` or `npm install --save-dev parcel`, both of them indicate that parcel is being installed as a dev-dependency.

Q. What are dev-dependencies?

A.  Dev-dependencies are those dependencies which are required only in the development environment (the developer's machine), and not the production environment. Examples of dev-dependencies include loggers, testing libraries etc

dev-dependencies are specified in the package.json file (not in the package-lock.json file)

Q. What does caret (^) and tilde (~) sign represent in the version of packages in package.json file?

Syntax: The syntax of the npm version looks like the following.

Major.Minor.Patch

`^ (caret)` represents that the minor and patch version can be upgraded, i.e. if dependency is specified as `^2.3.1` then it can be uppgraded to version 2.4.3 or 2.3.5, when installing.

`~ (tilde)` represents that only patch version can be upgraded, i.e. if dependency is specified as `~2.3.1` then it can be upgraded to 2.3.x only while installing.

Q. What is the difference between the package.json and package-lock.json files? 

A. Refer this article: [Difference Between Package.json and package-lock.json files](https://dillionmegida.com/p/package-vs-package-lock-json/)

With package-lock.json, the versions of all dependencies your package would need are locked (-lock). This means when you run npm install on another system, npm checks this file to install the exact versions of the dependencies. If this file is absent, npm would then work with the caret symbol.

We all have encountered the issue, when we say "code runs on my machine but not on production", this is because of mismatch of the dependency versions on the production and development environments, so to prevent such issues, we `SHOULD ALWAYS COMMIT PACKAGE-LOCK.JSON` on to the git repository.

Q. Look at the node_modules folder, what are all these folders and files which are present inside this folder?

A. One important point to understand here is that we have installed parcel, parcel has dependencies on other packages, and these packages may have dependencies on other packages. So, the node_modules has all the packages which are required for parcel, like browsersList (which enables us to use the React app on older browsers also), among other packages.

Don't get intimated by the size of node_modules or the number of packages in node_modules folder, it has various memes on it for a reason :)

![Meme on node_modules](Node_modules_meme.png)

`NEVER` push node_modules onto git repository, because node_modules is a very heavy folder, which occupies a lot of space, also node_modules can be regenerated by installing the package-lock.json file again on the production machine.

We are now going to remove the CDN links from the index.html file, and instead we are going to use package for React.

Question which might arise in mind is: Why removing CDN link? Why did we do it in the first session then?

A. Disadvantages of CDN links: Currently, React is on version 18. If tomorrow, React updates to a latest version, we'll also have to update the links to the scripts. Also, fetching data from a CDN can take time, as compared to using the packages from the local node_modules folder on production/development machine. Also, to avoid the unusual case of unpkg.com CDN going down (highly unlikely, but still it's better not to take risks :) ) 

Why did we use it in the first session? To remove the fear of React. To just convey that React is just a piece of Javascript written by Facebook developers, and to stop treating React as a monster.

So, we'll install the dependencies `npm install react` and `npm install react-dom` into out project, and then `IGNITE OUR APP` using `npx parcel index.html` (index.html is the entry point of our app) which will start a server for us.

NPX means execute using NPM.

Initially, on starting the server, it will give 'Not rendered' on the browser, and in the console, it will give a message saying 'React is not defined.' This message is because we need to import React and ReactDOM in the App.js file, previously it was not required because the CDN links were giving access to the React and ReactDOM objects.


Again, Parcel will give an error, something like: 
    Browser scripts cannot have imports or exports.
   
   `> 1 | import React from "react";   | ^^^^^^^^^^^^^^^^^^^^^^^^^`

Q. Why is this error coming up, and how can we fix it?

A. Let's go to index.html file. When the browser comes to the line `script src='App.js`, it sees the import statments inside the App.js file. However, it is important to note that `The browser doesn't understand the import statements`, so it's important to mark this script as    `type="module"`, so that the import statements can be correctly interpreted.

Note on react-dom and react-dom/client: If we see the console, we get a warning, something along: `u are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".` This is because in earlier versions of React, import used to work from "react-dom", but now in the latest version of React (18), the import is supported from "react-dom/client". 


IMPORTANT: What all tasks does Parcel do in our React app?

`Hot Module Replacement (HMR): Hot Module Replacement is a feature that enables you to see code changes in the browser without having to refresh it, allowing you to preserve the state of your front-end application. HMR is possible because of a file watcher algorithm (the implementation of this algorithm is written in C++ because C++ is very fast), which is used by Parcel`

`Bundling: means combining all the code (JS,CSS,HTML) into a single JS,CSS or HTML file respectively in the dist folder`

`Minification: Minification refers to the process of removing unnecessary or redundant code - e.g. code comments and formatting, removing unused code, using shorter variable and function names, and so on. This helps to reduce the file size, reducing the loading time on the client side. NOTE:Minification and Bundling are not the same`

`Cleaning the code: The minified bundled file would not have any console log statements in them, so Parcel cleans up the code`

`Super fast build algorithm: Parcel has a super fast build algorithm, `

`Dev and production build: Parcel allows us to create different dev and production build for the React app`

`Image optimisation: optimises the images (images takes a lot of time to load)`

`Caching while development: Parcel caches the file during development in .parcel-cache folder, so subsequent developments take much lesser time to build. `

`Compression`

`Compatible with older versions of browser: adds polyfills (babel is also a part of parcel,see the node_modules folder)`

`Supports HTTPS build too on development: need to use parcel build index.html --https`

`Takes care of Port numbers: If we build two different apps simulatenously, React takes care to ensure that they run on different port numbers`

`Consistent Hashing Algorithm: used for bundling. Not going into detail, since it is related to distributed systems`

`Zero build: Compared to other bundlers like vite or webpack, parcel requires minimal configuration. `

Building production build using Parcel: 

Using the command `npx parcel build index.html`.

It will give me 3 files: a minified index.html, a minified CSS file, and a minified Javascript file.

Important Interview question: `Should parcel.cache be put inside gitignore, or should it be pushed onto the git repository?`

Answer: `parcel-cache shouldn't be on the git repository, it should be inside the gitignore. The reason is that parcel-cache and node_modules can be regenerated on the production server by using npm install or parcel build ,so they shouldn't be pushed onto the git repository.`

Interview question: `What makes React fast?`

Answer: `It's not just the Virtual DOM which makes React fast, it is also the bundler which makes the React app fast`

TODO: Transitive dependencies